// Controller before a person is logged in

(function(){

  angular
    .module('prinit')
    .controller('MainController', MainController);

    MainController.$inject = ['$resource'];


  function MainController($resource){

        var self = this;

        self.test = "prinit ok im in it!";
        

        self.display_two_to_three = true;

        self.display_two_to_three_l = false;

        self.getVariantId = '';

        self.idVar = '';

        // self.getImgRotation = '';

        self.select = '';

   

        self.viewOptions = false;

        self.viewPrice = true;


        var photos = [];

        var carouselPhotos = [];

        var items = [];

        var activateItemsArray = [];

        var canvasOptionsArray = [];


    


        // getting needed dom elements
        var billing_and_shipping = document.getElementsByClassName("billing-and-shipping-equal");

        var indexImage = document.getElementsByClassName("indexImg");

        var slideImage = document.getElementsByClassName("carouselSlide");

        var carouselItems = document.getElementsByClassName("thumbnail-modal-trigger");

        var cItems = document.getElementsByClassName("item");
        
        var canvOptions = document.getElementsByClassName("size-button");

      
        // array creators
        var activateItemsCreator = activateItemsArray.push(cItems);

        var imgArrayCreator = photos.push(indexImage);

        var slideImageArrayCreator = carouselPhotos.push(slideImage);

        var imagelistArrayCreator = items.push(carouselItems);

        var canvOptionsArryCreator = canvasOptionsArray.push(canvOptions);




        // fine-tuning array depth
        var activateItems = activateItemsArray[0];

        var photoArray = photos[0];

        self.carouselPhotoArray = carouselPhotos[0];

        var carouselItemsArray = carouselItems[0];

        var canvasOptions = canvasOptionsArray[0];

        // this function alters the appearance of the canvas option size buttons on the posts show page
        $('.size-button').click(function(){
          console.log($(this).index());
          self.select = $(this).index();
          for(i = 0; i < canvasOptions.length; i++) {
    
            $(canvasOptions[i]).removeClass('clear-btn');
            $(canvasOptions[i]).removeClass('btn-success');
          
          }
          $(canvasOptions[self.select]).addClass('btn-success');
          
        })

        // diplays price when a canvas option is clicked
        self.viewPriceClicked = function (){
          self.viewPrice = false;
        }

        // sets class of active the carousel slide photo that photo that corresponds to the index of the thumbnail that was clicked 
        $('.imgDiv').mousedown(function(){
          console.log($(this).index());
          self.idVar = $(this).index();
          for(i = 0; i < photoArray.length; i++) {
            $(activateItems[i]).removeClass('active');
          }
          $(activateItems[self.idVar]).addClass('active');
        })

        // hides view ___ options button and displays the canvas size options
        self.viewOptionsClicked = function () {
          self.viewOptions = true;
          console.log("should be hidden");
        }


        $(document).on("mousedown", ".cart-item-delete", function(){
          location.reload(true);
          });

        



        self.testFunc = function(){
          console.log('taterSalad');
          console.log(photoArray);

      
        }

        // self.imgRotateLeft = function() {
        //   self.getImgRotation = 'rotate90';
        //   console.log("rotate90");
        // }

     


        // self.tileSize = function() {
        //   for(i = 0; i < photoArray.length; i++){

        //     var zero = i === 0;
        //     var one = i === 1;
        //     var two_three_mod = i % 2 === 0 && i % 3 === 0;
        //     var two_mod = i % 2 === 0;
        //     var three_mod = i % 3 === 0;
            
        //     if(zero){
        //       console.log('0 size');
        //       var z = i;
        //       console.log(z);
        //       photoArray[z].setAttribute('height', '300');
        //     } 
        //     else if (one) { 
        //       console.log('1 size');
        //       var z = i;
        //       console.log(z);
        //       photoArray[z].setAttribute('height', '250');
        //     }
        //     else if (two_three_mod) { 
        //       console.log('two three mod');
        //       var z = i;
        //       console.log(z);
        //       photoArray[z].setAttribute('height', '400');
        //     } 
        //     else if (two_mod) { 
        //       console.log('two mod');
        //       self.smallClass = 'smallBox';
        //       var z = i;
        //       console.log(z);
        //       photoArray[z].setAttribute('height', '200');
        //     }
        //     else if (three_mod){ 
        //       console.log('three mod');
        //       var z = i;
        //       console.log(z);
        //       photoArray[z].setAttribute('height', '250');
        //     }
        //     else {
        //       console.log('default');
        //       var z = i;
        //       console.log(z);
        //       photoArray[z].setAttribute('height', '350');
        //     }
        //   }
        // }

         // ////////////// page refresh function


        
        

      // Dynamically displays images

        self.show_two_to_three = function(url){
          console.log("24×36");
          self.image_url = url;
          self.display_two_to_three = false;
          self.display_two_to_three_l = true;
          self.getVariantId = 825;
        }

        self.show_two_to_three_l = function(url){
          console.log("36×24");
          self.image_url = url;
          self.display_two_to_three = true;
          self.display_two_to_three_l = false;
          self.getVariantId = 825;
        }
                

  }

})();